!function(){"use strict";function t(t){t.defaults.xsrfHeaderName="X-CSRFToken",t.defaults.xsrfCookieName="csrftoken"}function e(t,e,n){t.$on("$stateChangeStart",function(o,a,s){var c=a.data.requireLogin,r=n.isAuthAcct();if(c&&!r)return o.preventDefault(),e.go("login"),t})}angular.module("mga",["ngAnimate","ngTouch","ngSanitize","ngCookies","ngFileUpload","angularMoment","monospaced.elastic","ui.router","ui.bootstrap","ui.select","mwl.calendar","mga.config","mga.routes","main","users","forum","schedule"]),angular.module("mga.config",["ui.router"]),angular.module("mga.routes",["ui.router.router"]),angular.module("mga").run(t),t.$inject=["$http"],angular.module("mga").run(e),e.$inject=["$rootScope","$state","Main"]}(),function(){"use strict";function t(t,e,n){n.interceptors.push("tokenInterceptor"),e.caseInsensitive(!0),e.strictMode(!1)}angular.module("mga.config").config(t),t.$inject=["$locationProvider","$urlMatcherFactoryProvider","$httpProvider"]}(),function(){"use strict";function t(t,e){e.otherwise(function(t){var e=t.get("$state");e.go("app.dashboard")}),t.state("app",{abstract:!0,url:"/app",controller:"AppController",controllerAs:"vm",templateUrl:static_path("views/main/app.html"),data:{requireLogin:!0}}).state("app.dashboard",{url:"/dashboard/:userId",controller:"DashBoardController",controllerAs:"vm",templateUrl:static_path("views/main/dashboard.html"),data:{requireLogin:!0}}).state("app.practiceroom",{url:"/practice-room/:userId",controller:"PracticeRoomController",controllerAs:"vm",templateUrl:static_path("views/main/practiceroom.html"),data:{requireLogin:!0}}).state("app.student-locker",{url:"/student-locker/:userId",controller:"StudentLockerController",controllerAs:"vm",templateUrl:static_path("views/main/studentlocker.html"),data:{requireLogin:!0}}).state("app.commonroom",{url:"/common-room/:userId",controller:"CommonRoomController",controllerAs:"vm",templateUrl:static_path("views/main/commonroom.html"),data:{requireLogin:!0}}).state("app.leaderboard",{url:"/leaderboard/:userId",controller:"LeaderBoardController",controllerAs:"vm",templateUrl:static_path("views/main/leaderboard.html"),data:{requireLogin:!0}}).state("app.profile",{url:"/profile/:userId",controller:"UserProfileController",controllerAs:"vm",templateUrl:static_path("views/users/user-profile.html"),data:{requireLogin:!0}}).state("app.student-goal",{url:"/student-goals/:userId",controller:"StudentGoalController",controllerAs:"vm",templateUrl:static_path("views/users/student-goal.html"),data:{requireLogin:!0}}).state("app.student-objective",{url:"/student-objectives/:userId",controller:"StudentObjectiveController",controllerAs:"vm",templateUrl:static_path("views/users/student-objective.html"),data:{requireLogin:!0}}).state("app.student-practice",{url:"/student-practice/:userId",controller:"StudentPracticeController",controllerAs:"vm",templateUrl:static_path("views/users/student-practice.html"),data:{requireLogin:!0}}).state("app.student-wishlist",{url:"/student-wishlist/:userId",controller:"StudentWishListController",controllerAs:"vm",templateUrl:static_path("views/users/student-wishlist.html"),data:{requireLogin:!0}}).state("app.student-materials",{url:"/student-materials/:userId",controller:"StudentMaterialsController",controllerAs:"vm",templateUrl:static_path("views/users/student-materials.html"),data:{requireLogin:!0}}).state("app.student-plan",{url:"/student-plan/:userId",controller:"StudentPlanController",controllerAs:"vm",templateUrl:static_path("views/users/student-plan.html"),data:{requireLogin:!0}}).state("app.forum",{url:"/forum",controller:"ForumController",controllerAs:"vm",templateUrl:static_path("views/forum/forum.html"),data:{requireLogin:!0}}).state("app.schedule",{url:"/schedule",controller:"ScheduleController",controllerAs:"vm",templateUrl:static_path("views/schedule/schedule.html"),data:{requireLogin:!0}}).state("login",{url:"/login",controller:"AuthenticationController",controllerAs:"vm",templateUrl:static_path("views/main/login.html"),data:{requireLogin:!1}}).state("logout",{url:"/logout",controller:"LogoutController",controllerAs:"vm",data:{requireLogin:!0}})}angular.module("mga.routes").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("forum",["forum.controllers","forum.services","forum.directives"]),angular.module("forum.controllers",[]),angular.module("forum.services",[]),angular.module("forum.directives",[])}(),function(){"use strict";angular.module("main",["main.controllers","main.services","main.directives","main.filters"]),angular.module("main.controllers",[]),angular.module("main.services",[]),angular.module("main.directives",[]),angular.module("main.filters",[])}(),function(){"use strict";angular.module("schedule",["schedule.controllers","schedule.services","schedule.directives"]),angular.module("schedule.controllers",[]),angular.module("schedule.services",[]),angular.module("schedule.directives",[])}(),function(){"use strict";angular.module("users",["users.controllers","users.services","users.directives"]),angular.module("users.controllers",[]),angular.module("users.services",[]),angular.module("users.directives",[])}(),function(){"use strict";function t(t,e,n,o,a,s){function c(){if(o.isAuthAcct()){var t=o.getAuthAcct();s.getUser(t.id).then(function(t){u.user=t}).catch(function(t){o.logout()}),a.getAllCategories().then(r).catch(i)}else console.log("Could not get account")}function r(t){u.categories=t}function i(t){console.log(t)}var u=this;u.discussionClass="",c(),u.setCategory=function(t){u.discussionClass="animate fadeOutDown",u.category=t,u.discussionClass="animate fadeInDown"}}angular.module("forum.controllers").controller("ForumController",t),t.$inject=["$scope","$sce","$state","Main","Forum","Users"]}(),function(){"use strict";function t(t,e,n,o,a,s){var c={restrict:"EA",scope:{category:"=",userId:"=",path:"=",playLevelColor:"=",discussionClass:"="},link:function(n,c,r){function i(t){n.category.category_topic.push(t),n.getMessages(t.id)}function u(t){console.log(t)}function l(t){n.messages=t,n.messageClass="animated fadeInRight"}function d(t){console.log(t)}n.newMessage={},n.authAcct=e.getObject("authAcct"),n.open=function(e){a.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/forum-topic.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(t,e,o){var a=this;a.closeModal=function(){e.dismiss("cancel")},a.addNewTopic=function(t){n.addTopic(t),e.close()}}],controllerAs:"vm",size:"lg"})},n.addTopic=function(t){t.category_id=n.category.id,o.addNewTopic(t).then(i).catch(u)},n.getMessages=function(t){n.messageClass="animated fadeOutLeft",o.getAllMessages(t).then(l).catch(d)},n.addMessage=function(t,e){var o={message:t.message,topic_id:e,message_file:t.message_file};s.upload({url:"api/v1/forum-message/",data:o}).then(function(t){n.newMessage={},n.messages.topic_message.push(t.data)},function(t){console.log("Error status: "+t.status)},function(t){var e=parseInt(100*t.loaded/t.total);n.fileProgress=e,console.log("progress: "+e+"% "+t.config.data.message_file.name)})},n.$watch("category",function(t){t&&(n.messages="")},!0)},templateUrl:t.trustAsResourceUrl(static_path("views/directives/forum-discussion.directive.html"))};return c}angular.module("forum.directives").directive("forumDiscussion",t),t.$inject=["$sce","$cookies","Users","Forum","$uibModal","Upload"]}(),function(){"use strict";function t(t,e,n,o){function a(t){return t.data}function s(t){return e.reject("Error "+t.status)}function c(){return t.get("api/v1/forum-topics/").then(a).catch(s)}function r(){return t.get("api/v1/forum-category/").then(a).catch(s)}function i(e){return t.get("api/v1/forum-topics/"+e+"/",e).then(a).catch(s)}function u(e){return t.post("api/v1/forum-message/",e).then(a).catch(s)}function l(e){return t.post("api/v1/forum-topics/",e).then(a).catch(s)}var d=this;d.acct=o.getObject("authAcct");var h={getAllTopics:c,getAllCategories:r,getAllMessages:i,addNewMessage:u,addNewTopic:l};return h}angular.module("forum.services").factory("Forum",t),t.$inject=["$http","$q","$state","$cookies"]}(),function(){"use strict";function t(t,e,n,o,a){function s(){o.isAuthAcct()?(r.authAcct=o.getAuthAcct(),a.getUser(r.authAcct.id).then(function(t){r.currentUser=t}).catch(function(t){o.logout()})):(console.log("Could not get account"),n.go("login")),c()}function c(){var t=!1;r.lbd={misc:{navbar_menu_visible:0},initRightMenu:function(){t||(r.off_canvas_sidebar=$("nav").find(".navbar-collapse").first().clone(!0),r.sidebar=$(".sidebar"),r.sidebar_bg_color=r.sidebar.data("background-color"),r.sidebar_active_color=r.sidebar.data("active-color"),r.logo=r.sidebar.find(".logo").first(),r.logo_content=r.logo[0].outerHTML,r.ul_content="",r.off_canvas_sidebar.attr("data-background-color",r.sidebar_bg_color),r.off_canvas_sidebar.attr("data-active-color",r.sidebar_active_color),r.off_canvas_sidebar.addClass("off-canvas-sidebar"),r.off_canvas_sidebar.children("ul").each(function(){r.content_buff=$(this).html(),r.ul_content=r.ul_content+r.content_buff}),r.content_buff=r.sidebar.find(".nav").html(),r.ul_content=r.ul_content+'<li class="divider"></li>'+r.content_buff,r.ul_content='<ul class="nav navbar-nav">'+r.ul_content+"</ul>",r.navbar_content=r.logo_content+r.ul_content,r.navbar_content='<div class="sidebar-wrapper">'+r.navbar_content+"</div>",r.off_canvas_sidebar.html(r.navbar_content),$("body").append(r.off_canvas_sidebar),r.toggle=$(".navbar-toggle"),r.off_canvas_sidebar.find("a").removeClass("btn btn-round btn-default"),r.off_canvas_sidebar.find("button").removeClass("btn-round btn-fill btn-info btn-primary btn-success btn-danger btn-warning btn-neutral"),r.off_canvas_sidebar.find("button").addClass("btn-simple btn-block"),r.toggle.click(function(){1==r.lbd.misc.navbar_menu_visible?($("html").removeClass("nav-open"),r.lbd.misc.navbar_menu_visible=0,$("#bodyClick").remove(),setTimeout(function(){r.toggle.removeClass("toggled")},400)):(setTimeout(function(){r.toggle.addClass("toggled")},430),r.div='<div id="bodyClick"></div>',$(r.div).appendTo("body").click(function(){$("html").removeClass("nav-open"),r.lbd.misc.navbar_menu_visible=0,$("#bodyClick").remove(),setTimeout(function(){r.toggle.removeClass("toggled")},400)}),$("html").addClass("nav-open"),r.lbd.misc.navbar_menu_visible=1)}),r.sideMenu=$(".side-menu"),r.sideMenu.click(function(){1==r.lbd.misc.navbar_menu_visible?($("html").removeClass("nav-open"),r.lbd.misc.navbar_menu_visible=0,$("#bodyClick").remove(),setTimeout(function(){r.toggle.removeClass("toggled")},400)):(setTimeout(function(){r.toggle.addClass("toggled")},430),r.div='<div id="bodyClick"></div>',$(r.div).appendTo("body").click(function(){$("html").removeClass("nav-open"),r.lbd.misc.navbar_menu_visible=0,$("#bodyClick").remove(),setTimeout(function(){r.toggle.removeClass("toggled")},400)}),$("html").addClass("nav-open"),r.lbd.misc.navbar_menu_visible=1)}),t=!0)}},$(document).ready(function(){var t=$(window).width();t<=991&&window.setTimeout(r.lbd.initRightMenu,1e3),$('[rel="tooltip"]').tooltip()}),$(window).resize(function(){$(window).width()<=991&&r.lbd.initRightMenu()})}var r=this;s(),t.$on("update_user_info",function(t,e){r.authAcct.id==e.id&&(r.currentUser=e)});var i=media_path(""),u=static_path("");t.path={static_files:e.trustAsResourceUrl(u),media:e.trustAsResourceUrl(i)},t.playLevelColor={1:"bg-white",2:"bg-red",3:"bg-yellow",4:"bg-green",5:"bg-blue",6:"bg-purple",7:"bg-brown",8:"bg-black"}}angular.module("main.controllers").controller("AppController",t),t.$inject=["$scope","$sce","$state","Main","Users"]}(),function(){"use strict";function t(t,e,n,o,a,s,c){function r(){s.isAuthAcct()&&(h.authUser=s.getAuthAcct(),n.go("app.dashboard",{userId:h.authUser.id}))}function i(t){n.go("app.dashboard",{userId:t.id})}function u(t){console.log(t),h.loginError=t.data.message}function l(e){$.notify({icon:"ti-check",message:"Account has been created! Pending activation from Melbourne Guitar Academy. You will receive an email upon activation."},{type:"warning",timer:1e3,placement:{from:"top",align:"right"},template:'<div class="alert alert-{0} alert-with-icon" data-notify="container"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><span data-notify="icon"></span><span data-notify="message">{2}</span></div>'}),t.isCollapsed=!1,t.registerForm.$setPristine(),h.newUser={},n.go("login")}function d(t){console.log(t),500===t.status?h.registerError="username or email in use":h.registerError=t.data.message}var h=this;h.dateReg=/^(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,r(),h.goToSignup=function(){$("html, body").animate({scrollTop:$("#signup").offset().top},300)},h.login=function(t,e){s.login(t,e).then(i).catch(u)},h.register=function(t){t.password===t.confirm_password?s.register(t).then(l).catch(d):h.registerError="Passwords must match!"};var f=media_path(""),p=static_path("");t.path={static_files:e.trustAsResourceUrl(p),media:e.trustAsResourceUrl(f)}}angular.module("main.controllers").controller("AuthenticationController",t),t.$inject=["$scope","$sce","$state","$location","$anchorScroll","Main","Users"]}(),function(){"use strict";function t(t,e,n,o,a){function s(){o.isAuthAcct()?(u.authAcct=o.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.commonRoomId=n.userId:(u.commonRoomId=u.authAcct.id,e.transitionTo("app.commonroom",{userId:u.commonRoomId},{notify:!1})),c(u.commonRoomId)):e.go("login")}function c(t){a.getUser(t).then(r).catch(i)}function r(t){u.user=t}function i(t){console.log(t),o.logout()}var u=this;s()}angular.module("main.controllers").controller("CommonRoomController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use strict";function t(t,e,n,o,a){function s(){o.isAuthAcct()?(u.authAcct=o.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.dashboard",{userId:u.dashId},{notify:!1})),c(u.dashId)):e.go("login")}function c(t){a.getUser(t).then(r).catch(i)}function r(t){u.user=t}function i(t){console.log(t),o.logout()}var u=this;s()}angular.module("main.controllers").controller("DashBoardController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use static";function t(t,e,n,o,a){function s(){o.isAuthAcct()?(l.authAcct=o.getAuthAcct(),n.userId&&l.authAcct.is_staff?l.dashId=n.userId:(l.dashId=l.authAcct.id,e.transitionTo("app.leaderboard",{userId:l.dashId},{notify:!1})),c(l.dashId),a.getAll().then(u).catch(i)):e.go("login")}function c(t){a.getUser(t).then(r).catch(i)}function r(t){l.user=t}function i(t){console.log(t),o.logout()}function u(t){l.allUsers=t,l.leaderUsers=angular.copy(t),l.setLeaderboard(l.leaderUsers)}var l=this;s(),l.dateRange=moment("12-25-1995","MM-DD-YYYY"),l.setLeaderboard=function(t){l.tempLeaderBoard=[],angular.forEach(t,function(t,e){if(t.student_log.length)if(t.student_log=_.filter(t.student_log,function(t){if(t.practice_date)return moment(t.practice_date).isAfter(l.dateRange)}),t.student_log.length)var n=l.getSum(t.student_log);else var n={max_speed:0,speed_total:0,speed_avg:0,time_total:0,time_avg:0,last_practice:"no practice"};else var n={max_speed:0,speed_total:0,speed_avg:0,time_total:0,time_avg:0,last_practice:"no practice"};if(t.student_goal.length)if(t.student_goal=_.filter(t.student_goal,function(t){return moment(t.goal_complete_date).isAfter(l.dateRange)}),t.student_goal.length)var o=_.where(t.student_goal,{goal_complete:!0}).length;else var o=0;else var o=0;if(t.student_objective.length)if(t.student_objective=_.filter(t.student_objective,function(t){return moment(t.objective_complete_date).isAfter(l.dateRange)}),t.student_objective.length)var a=_.where(t.student_objective,{objective_complete:!0}).length;else var a=0;else var a=0;if(t.student_wishlist.length)if(t.student_wishlist=_.filter(t.student_wishlist,function(t){return moment(t.wish_item_complete_date).isAfter(l.dateRange)}),t.student_wishlist.length)var s=_.where(t.student_wishlist,{wish_item_complete:!0}).length;else var s=0;else var s=0;var c={id:t.id,is_active:t.is_active,first_name:t.first_name,last_name:t.last_name,play_level:t.play_level,practice_speed_high:n.max_speed,practice_speed_avg:n.speed_avg,practice_speed_total:n.speed_total,practice_time_avg:n.time_avg,practice_time_total:n.time_total,practice_count:t.student_log.length,last_practice_date:n.last_practice,goals_complete:o,objectives_complete:a,wishes_complete:s};l.tempLeaderBoard.push(c)}),l.leaderBoard=l.tempLeaderBoard},l.getSum=function(t){var e=[],n=[],o=[],a=0,s="";if(angular.forEach(t,function(t,c){if(t.practice_time){var r={},i=parseInt(t.practice_time);if(e.push(i),o.length){var u=_.findWhere(o,{date:t.practice_date});u?u.tot=parseInt(u.tot)+i:(r.tot=i,r.date=t.practice_date,o.push(r))}else r.tot=i,r.date=t.practice_date,o.push(r)}if(t.practice_speed){var l=parseInt(t.practice_speed);l>a&&(a=l),n.push(l)}t.practice_date&&t.practice_date>s&&(s=t.practice_date)}),e.length)var c=e.reduce(function(t,e){return t+e});else var c=0;if(n.length)var r=n.reduce(function(t,e){return t+e});else var r=0;if(o.length){var i=0;_.each(o,function(t,e){i+=t.tot})}else var i=0;return{max_speed:a,speed_total:r,speed_avg:r/n.length,time_total:c,time_avg:i/o.length,last_practice:s}},l.getRange=function(t){l.adjDate=moment().subtract(1,t),l.dateRange=l.adjDate;var e=angular.copy(l.allUsers);l.setLeaderboard(e)},l.getRange("month"),l.resetLeaderboard=function(){l.dateRange=moment("12-25-1995","MM-DD-YYYY");var t=angular.copy(l.allUsers);l.setLeaderboard(t)}}angular.module("main.controllers").controller("LeaderBoardController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use strict";function t(t,e){function n(){e.isAuthAcct()?e.logout():t.go("login")}n()}angular.module("main.controllers").controller("LogoutController",t),t.$inject=["$state","Main"]}(),function(){"use strict";function t(t,e,n,o,a){function s(){o.isAuthAcct()?(u.authAcct=o.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.practiceRoomId=n.userId:(u.practiceRoomId=u.authAcct.id,e.transitionTo("app.practiceroom",{userId:u.practiceRoomId},{notify:!1})),c(u.practiceRoomId)):e.go("login")}function c(t){a.getUser(t).then(r).catch(i)}function r(t){u.user=t}function i(t){console.log(t),o.logout()}var u=this;s()}angular.module("main.controllers").controller("PracticeRoomController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use strict";function t(t,e,n,o,a){function s(){o.isAuthAcct()?(u.authAcct=o.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.studentLockerId=n.userId:(u.studentLockerId=u.authAcct.id,e.transitionTo("app.student-locker",{userId:u.studentLockerId},{notify:!1})),c(u.studentLockerId)):e.go("login")}function c(t){a.getUser(t).then(r).catch(i)}function r(t){u.user=t}function i(t){console.log(t),o.logout()}var u=this;s()}angular.module("main.controllers").controller("StudentLockerController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use strict";function t(t,e,n){console.log("STOPWATCH");var o={restrict:"EA",scope:{path:"="},link:function(e,o,a){function s(){r=n(function(){c()},10)}function c(){e.milliseconds++,100===e.milliseconds&&(e.milliseconds=0,e.seconds++,60==e.seconds&&(e.seconds=0,e.minutes++))}var r;e.seconds=0,e.minutes=0,e.milliseconds=0,e.running=!1,e.activeCard=!1,e.tick=t.trustAsResourceUrl(static_path("sounds/tick.mp3")),e.stop=function(){n.cancel(r),e.running=!1},e.start=function(){s(),e.running=!0},e.clear=function(){e.milliseconds=0,e.seconds=0,e.minutes=0}},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/stopwatch.directive.html"))}};return o}angular.module("main.directives").directive("stopWatch",t),t.$inject=["$sce","$timeout","$interval"]}(),function(){"use strict";function t(t,e,n,o,a,s){var c={restrict:"EA",scope:{tempType:"=",userId:"=",goals:"="},link:function(a,c,r){a.sortType=["goal_complete","goal_target_date"],a.sortReverse=!1,a.searchItem="",a.open=function(e){o.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/student-goal.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(t,n,o){var s=this;e.id?(s.modalTitle="Update Goal",s.studentGoal=e):(s.modalTitle="New Goal",s.studentGoal={}),s.openDate=function(t){t.preventDefault(),t.stopPropagation(),o(function(){s.showPicker.opened=!s.showPicker.opened})},s.showPicker={opened:!1},s.closeModal=function(){n.dismiss("cancel")},s.submitGoal=function(t){if(e.id)a.updateGoal(t);else{var o=a.userId;a.addGoal(o,t)}n.close()}}],controllerAs:"vm",size:"lg"})},a.updateGoal=function(t){var n=t.id;if(t.goal)var o={id:t.id,goal:t.goal,goal_target_date:t.goal_target_date,goal_complete:t.goal_complete,goal_notes:t.goal_notes};else{var o=t,s=a.getDate();o.goal_complete_date=s.now}e.updateStudentGoal(n,o).then(function(e){var n=a.goals.indexOf(t);a.goals[n]=e}).catch(function(t){console.log(t)})},a.getDate=function(){var t=new Date,e=t.getDate(),n=t.getMonth()+1,o=t.getFullYear(),a=t.getHours(),s=t.getMinutes(),c=t.getSeconds(),r=o+"-"+n+"-"+e+"T"+a+":"+s+":"+c;return{today:t,dd:e,mm:n,yyyy:o,hh:a,m:s,secs:c,now:r}},a.addGoal=function(t,n){n.student=t,e.createStudentGoal(n).then(function(t){a.goals.push(t)}).catch(function(t){console.log(t)})},a.deleteGoal=function(t){var n=t.id;e.deleteStudentGoal(n).then(function(e){var n=a.goals.indexOf(t);a.goals.splice(n,1)}).catch(function(t){console.log(t)})},a.checkGoals=function(){a.$watch("goals",function(t){if(t){var e=new Date,o=new Date;o.setDate(o.getDate()+7);var a=n.getAuthAcct();if(a.notification.goal){var c=!1;if(a.notification.goal_time>o)var c=!0}if(c||!a.notification.goal){var r;if(angular.forEach(t,function(t,e){t.goal_target_date&&!t.goal_complete&&(r?t.goal_target_date<r&&(r=t.goal_target_date):r=t.goal_target_date)}),r){var i=new Date;i.setDate(i.getDate()+7);var u=new Date(r);e>u?$.notify({icon:"ti-medall",message:"You have Goals that are past the Target Date!"},{type:"danger",timer:1e3,placement:{from:"top",align:"right"},template:'<div class="alert alert-{0} alert-with-icon" data-notify="container"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><span data-notify="icon"></span><span data-notify="message">{2}</span></div>'}):i>u&&$.notify({icon:"ti-medall",message:"You have Goals that are approaching Target Date!"},{type:"warning",timer:1e3,placement:{from:"top",align:"right"},template:'<div class="alert alert-{0} alert-with-icon" data-notify="container"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><span data-notify="icon"></span><span data-notify="message">{2}</span></div>'}),a.notification={goal:!0,goal_time:e},s.putObject("authAcct",a)}}}},!0)},a.checkGoals()},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-goal-"+n.tempType+".directive.html"))}};return c}angular.module("main.directives").directive("studentGoal",t),t.$inject=["$sce","Users","Main","$uibModal","$timeout","$cookies"]}(),function(){"use strict";function t(t,e,n,o,a){var s={restrict:"EA",scope:{tempType:"=",userId:"=",materials:"=",path:"="},link:function(s,c,r){function i(t){var e=s.materials.indexOf(s.mat);s.materials.splice(e,1)}s.sortType=["-material_added"],s.sortReverse=!1,s.searchItem="",s.authAcct=e.getObject("authAcct"),s.open=function(e){o.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/student-materials.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(t,o,a){var c=this;c.path=s.path,c.authAcct=s.authAcct,c.hasGroup=!1,c.fileProgress=s.fileProgress,e.id?(c.modalTitle="Update Material",c.newMaterial=e,e.student_group.length&&(c.hasGroup=!0,s.hasGroup=c.hasGroup)):(c.modalTitle="Add Material",c.newMaterial={}),s.authAcct.is_staff&&n.getAll().then(function(t){c.allUsers=t}),c.closeModal=function(){o.dismiss("cancel")},c.submitMaterial=function(t){if(t.student_group){var n=!0;t.student_group.length>1&&t.student_group[0].email?t.group_student=_.pluck(_.clone(t.student_group),"id"):t.group_student=_.clone(t.student_group),t=_.omit(t,"student_group")}e.id?s.updateMaterial(t):(n?t.student=s.authAcct.id:t.student=s.userId,s.addMaterial(t)),o.close()}}],controllerAs:"vm",size:"lg"})},s.updateMaterial=function(t){var e=_.omit(t,"material_added_by","material_updated_by","student"),n=t.id,o=e;a.upload({url:"api/v1/student-materials/"+n+"/",data:o,method:"PUT"}).then(function(e){var n=s.materials.indexOf(t);s.materials[n]=e.data},function(t){console.log("Error status: "+t.status)},function(t){var e=parseInt(100*t.loaded/t.total);s.fileProgress=e})},s.addMaterial=function(t){a.upload({url:"api/v1/student-materials/",data:t}).then(function(t){s.materials.push(t.data)},function(t){console.log("Error status: "+t.status)},function(t){var e=parseInt(100*t.loaded/t.total);s.fileProgress=e})},s.deleteMaterial=function(t){var e=t.id;if(s.mat=t,t.student_group.length>1&&!s.authAcct.is_staff){var o=_.clone(t);o.group_student=_.without(_.pluck(o.student_group,"id"),s.userId),o=_.omit(o,"student_group"),s.updateMaterial(o),i()}else n.deleteStudentMaterial(e).then(i).catch(function(t){console.log(t)})}},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-materials-"+n.tempType+".directive.html"))}};return s}angular.module("main.directives").directive("studentMaterials",t),t.$inject=["$sce","$cookies","Users","$uibModal","Upload"]}(),function(){"use strict";function t(t,e,n){var o={restrict:"EA",scope:{tempType:"=",userId:"=",authAcct:"=",objectives:"="},link:function(o,a,s){o.sortType=["objective_complete","objective_created"],o.sortReverse=!1,o.searchItem="",o.open=function(e){n.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/student-objective.modal.html")),controller:["$scope","$uibModalInstance",function(t,n){var a=this;e.id?(a.modalTitle="Update Practice Item",a.studentObjective=e):(a.modalTitle="New Practice Item",a.studentObjective={}),a.closeModal=function(){n.dismiss("cancel")},a.submitObjective=function(t){if(e.id)o.updateObjective(t);else{var a=o.userId;o.addObjective(a,t)}n.close()}}],controllerAs:"vm",size:"lg"})},o.updateObjective=function(t){var n=t.id;if(t.objective)var a={id:t.id,objective:t.objective,objective_complete:t.objective_complete,objective_notes:t.objective_notes,objective_priority:t.objective_priority,objective_visible:t.objective_visible};else{var a=t,s=o.getDate();a.objective_complete_date=s.now}e.updateStudentObjective(n,a).then(function(e){var n=o.objectives.indexOf(t);o.objectives[n]=e}).catch(function(t){console.log(t)})},o.getDate=function(){var t=new Date,e=t.getDate(),n=t.getMonth()+1,o=t.getFullYear(),a=t.getHours(),s=t.getMinutes(),c=t.getSeconds(),r=o+"-"+n+"-"+e+"T"+a+":"+s+":"+c;return{today:t,dd:e,mm:n,yyyy:o,hh:a,m:s,secs:c,now:r}},o.addObjective=function(t,n){n.student=t,e.createStudentObjective(n).then(function(t){o.objectives.push(t)}).catch(function(t){console.log(t)})},o.deleteObjective=function(t){var n=t.id;e.deleteStudentObjective(n).then(function(e){var n=o.objectives.indexOf(t);o.objectives.splice(n,1)}).catch(function(t){console.log(t)})}},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-objective-"+n.tempType+".directive.html"))}};return o}angular.module("main.directives").directive("studentObjective",t),t.$inject=["$sce","Users","$uibModal"]}(),function(){"use strict";function t(t,e,n,o,a){var s={restrict:"EA",scope:{tempType:"=",authAcct:"=",userId:"=",plans:"=",path:"="},link:function(n,s,c){function r(t){n.sortedPlans=_.groupBy(t,"plan_week")}n.searchItem="",n.$watch("plans",function(t,e){t&&r(t)}),n.openPlan=function(a,s){n.selectedPlan=a;var c=_.clone(a);o.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/student-plan.modal.html")),controller:["$scope","$uibModalInstance",function(t,o){var a=this;a.path=n.path,a.plan_files=n.selectedPlan.student_plan_file,n.authAcct.is_staff&&(a.authAcct=n.authAcct,e.getAll().then(function(t){a.allUsers=t})),c.id&&s?(a.edit=!0,a.modalTitle="Update",a.plan=c):c.id&&!s?(a.edit=!1,a.modalTitle="",a.plan=c):(a.edit=!0,a.modalTitle="New",a.plan={}),a.closeModal=function(){o.dismiss("cancel")},a.submitPlan=function(t){n.sendPlan(t),o.close()},a.removePlanFile=function(t){n.removePlanFile(t)}}],controllerAs:"vm",size:"lg"})},n.sendPlan=function(t){if(t.students.length>1&&t.students[0].id&&(t.students=_.pluck(_.clone(t.students),"id")),t.student_plan_file)var e=_.omit(t,"student_plan_file");else var e=t;if(t.id)var o="api/v1/student-plan/"+t.id+"/",s="PUT";else var o="api/v1/student-plan/",s="POST";a.upload({url:o,data:e,method:s}).then(function(e){if(t.id){var o=n.plans.indexOf(n.selectedPlan);n.plans[o]=e.data}else n.plans.push(e.data);r(n.plans)},function(t){console.log("Error status: "+t.status)},function(t){var e=parseInt(100*t.loaded/t.total);n.fileProgress=e})},n.removePlanFile=function(t){e.deleteStudentPlanFile(t).then(function(e){var o=n.selectedPlan.student_plan_file.indexOf(t);n.selectedPlan.student_plan_file.splice(o,1)}).catch(function(t){console.log(t)})},n.removePlan=function(t){e.deleteStudentPlan(t).then(function(e){var o=n.plans.indexOf(t);n.plans.splice(o,1),r(n.plans)}).catch(function(t){console.log(t)})},r(n.plans)},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-plan-"+n.tempType+".directive.html"))}};return s}angular.module("main.directives").directive("studentPlan",t),t.$inject=["$sce","Users","Main","$uibModal","Upload"]}(),function(){"use strict";function t(t,e,n,o){var a={restrict:"EA",scope:{tempType:"=",userId:"=",practiceLogs:"="},link:function(a,s,c){a.sortType=["practice_item_created"],a.sortReverse=!1,a.searchItem="",a.open=function(e){n.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/student-practice.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(t,n,o){var s=this;e.id?(s.modalTitle="Update Practice",s.newPracticeLog=e):(s.modalTitle="New Practice",s.newPracticeLog={}),s.openDate=function(t){t.preventDefault(),t.stopPropagation(),o(function(){s.showPicker.opened=!s.showPicker.opened})},s.showPicker={opened:!1},s.closeModal=function(){n.dismiss("cancel")},s.submitNewPracticeLog=function(t){if(e.id)a.updatePracticeLog(t);else{var o=a.userId;a.addPracticeLog(o,t)}n.close()}}],controllerAs:"vm",size:"lg"})},a.updatePracticeLog=function(t){var n=_.omit(t,"practice_item_created");e.updateStudentPracticeLog(n).then(function(e){a.pracLog=_.findWhere(a.practiceLogs,{id:t.id}),a.pracLog.practice_category_display=e.practice_category_display,a.getStats()}).catch(function(t){console.log(t)})},a.addPracticeLog=function(t,n){n.student=t,e.createStudentPracticeLog(n).then(function(t){a.practiceLogs.push(t),a.getStats()}).catch(function(t){console.log(t)})},a.deletePracticeLog=function(t){var n=t.id;e.deleteStudentPracticeLog(n).then(function(e){var n=a.practiceLogs.indexOf(t);a.practiceLogs.splice(n,1),a.getStats()}).catch(function(t){console.log(t)})},a.getStats=function(){o(function(){var t=[],e=[];a.maxSpeed=0,a.practiceLogs.length?angular.forEach(a.practiceLogs,function(n,o){if(n.practice_time){var s=parseInt(n.practice_time);t.push(s)}if(n.practice_speed){var c=parseInt(n.practice_speed);c>a.maxSpeed&&(a.maxSpeed=c),e.push(c)}}):(t.push(0),e.push(0)),a.sumTimes=t.reduce(function(t,e){return t+e}),a.sumSpeeds=e.reduce(function(t,e){return t+e})},1e3)},a.getStats()},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-practice-"+n.tempType+".directive.html"))}};return a}angular.module("main.directives").directive("studentPracticeLog",t),t.$inject=["$sce","Users","$uibModal","$timeout"]}(),function(){"use strict";function t(t,e,n){var o={restrict:"EA",scope:{tempType:"=",userId:"=",wishLists:"="},link:function(o,a,s){o.sortType=["wish_item_complete","wish_item_created"],
o.sortReverse=!1,o.searchItem="",o.open=function(e){n.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/student-wishlist.modal.html")),controller:["$scope","$uibModalInstance","$timeout",function(t,n,a){var s=this;e.id?(s.modalTitle="Update Song",s.newWishItem=e):(s.modalTitle="New Song",s.newWishItem={}),s.closeModal=function(){n.dismiss("cancel")},s.submitWishItem=function(t){if(e.id)o.updateWishItem(t);else{var a=o.userId;o.addWishItem(a,t)}n.close()}}],controllerAs:"vm",size:"lg"})},o.updateWishItem=function(t){var n=t.id;if(t.wish_item)var a={id:t.id,wish_item:t.wish_item,wish_item_complete:t.wish_item_complete,wish_item_notes:t.wish_item_notes};else{var a=t,s=o.getDate();a.objective_complete_date=s.now}e.updateStudentWishList(n,a).then(function(e){var n=o.wishLists.indexOf(t);o.wishLists[n]=e}).catch(function(t){console.log(t)})},o.getDate=function(){var t=new Date,e=t.getDate(),n=t.getMonth()+1,o=t.getFullYear(),a=t.getHours(),s=t.getMinutes(),c=t.getSeconds(),r=o+"-"+n+"-"+e+"T"+a+":"+s+":"+c;return{today:t,dd:e,mm:n,yyyy:o,hh:a,m:s,secs:c,now:r}},o.addWishItem=function(t,n){n.student=t,e.createStudentWishList(n).then(function(t){o.wishLists.push(t)}).catch(function(t){console.log(t)})},o.deleteWishItem=function(t){var n=t.id;e.deleteStudentWishList(n).then(function(e){var n=o.wishLists.indexOf(t);o.wishLists.splice(n,1)}).catch(function(t){console.log(t)})}},templateUrl:function(e,n){return t.trustAsResourceUrl(static_path("views/directives/student-wishlist-"+n.tempType+".directive.html"))}};return o}angular.module("main.directives").directive("studentWishList",t),t.$inject=["$sce","Users","$uibModal"]}(),function(){"use strict";function t(){return function(t,e){var n="";if(e){for(var o=parseInt(e,10),a=t.toString().length,s=0;s<o-a;s++)n="0"+n;n+=t}return n}}angular.module("main.filters").filter("numberpad",t),t.$inject=[]}(),function(){"use strict";function t(t,e,n,o,a,s,c,r,i,u,l){function d(){parseInt(h.user.user_credit)<parseInt(h.course.course_credit)?h.needCredit=!0:h.needCredit=!1,h.newClass={course_id:i.id,student_id:u.id,schedule_date:c(r.date).format("YYYY-MM-DD"),schedule_start_time:i.course_start_time,schedule_end_time:i.course_end_time,recurring:!1},"sched"==h.courseType&&_.contains(h.schedType.scheduledCourse.schedule_recurring_user,h.user.id)&&(h.newClass.recurring=!0)}var h=this;h.date=r,h.course=i,h.user=u,h.schedType=l,h.courseType=l.courseType,d(),h.getTime=function(t){return t.length<10?c("1999-12-12 "+t,"YYYY-MM-DD h:mm a").toDate():t},h.addClass=function(){"sched"==h.courseType&&(h.newClass.schedule=h.schedType.scheduledCourse.id),s.close(h.newClass,h.courseType)},h.closeModal=function(){s.dismiss("cancel")}}angular.module("schedule.controllers").controller("AddCourseController",t),t.$inject=["$scope","$sce","Main","Users","Schedule","$uibModalInstance","moment","date","course","user","schedType"]}(),function(){"use strict";function t(t,e,n,o,a,s,c,r,i){function u(){o.isAuthAcct()?(b.authAcct=o.getAuthAcct(),a.getUser(b.authAcct.id).then(function(t){b.user=t,s.getAllCourses().then(l).catch(d),s.getSchedule().then(h).catch(f)}).catch(function(t){o.logout()})):console.log("Could not get account"),b.authAcct.is_admin&&(i.showTimesOnWeekView=!0,i.displayEventEndTimes=!0,b.calendarView="month"),b.calendarDate=new Date,p()}function l(t){b.courses=t,b.courseAvail=!0,b.getCourses(b.courses)}function d(t){console.log(t)}function h(t){b.schedule=t,b.schedAvail=!0,b.user.is_admin&&b.setSchedule(t)}function f(t){console.log(t)}function p(){b.week=[];for(var t=0;t<7;t++){var e=r(b.calendarDate).add(t,"d").format("dddd").toLowerCase();b.week.push({day:e,date:r(b.calendarDate).add(t,"d").toDate()})}}function m(t){u()}function g(t){console.log(t)}function v(t){u()}function A(t){console.log(t)}var b=this;b.isCollapsed=!0,b.schedAvail=!1,b.courseAvail=!1,b.userSchedule=[],u(),b.getCourses=function(t){b.availCourses=[],angular.forEach(t,function(t,e){for(var n=0;n<7;n++){var o=r(b.calendarDate).add(n,"d").format("dddd").toLowerCase(),a=r(b.calendarDate).add(n,"d").format("YYYY-MM-DD");if(1==_.propertyOf(t)(o)&&b.checkStudent(b.user,t)){if(t.course_location)var s=t.course_location.name;else var s="no location set";b.availCourses.push({day:o,date:r(b.calendarDate).add(n,"d").toDate(),start:r(a+"T"+t.course_start_time).toDate(),end:r(a+"T"+t.course_end_time).toDate(),course:t}),b.userSchedule.push({title:t.course_title+" - "+s,type:"info",startsAt:r(a+"T"+t.course_start_time).toDate(),endsAt:r(a+"T"+t.course_end_time).toDate(),editable:!0,deletable:!0,draggable:!1,resizable:!1,incrementsBadgeTotal:!0,course:t})}}})},b.checkStudent=function(t,e){if(b.user.is_admin)return!0;var n=t.play_level_display.toLowerCase(),o=r().diff(r(t.date_of_birth,"YYYYMMDD"),"years");if(t.student_log.length>0)var a=_.pluck(t.student_log,"practice_time"),s=a.reduce(function(t,e){return parseInt(t)+parseInt(e)});else var s=0;return!!(_.propertyOf(e)(n)&&o>=e.course_age_min&&o<=e.course_age_max&&s>=parseInt(e.practice_min))},b.setSchedule=function(t){angular.forEach(t,function(t,e){if(t.course.course_location)var n=t.course.course_location.name;else var n="no location set";var o={title:t.course.course_title+" - "+n,type:"success",startsAt:r(t.schedule_date+"T"+t.schedule_start_time).toDate(),endsAt:r(t.schedule_date+"T"+t.schedule_end_time).toDate(),editable:!0,deletable:!0,draggable:!1,resizable:!1,incrementsBadgeTotal:!0,schedule:t};b.userSchedule.push(o)})},b.addCourse=function(t){s.addCourse(t).then(m).catch(g)},b.removeCourse=function(t){s.removeCourse(t).then(v).catch(A)},b.checkDate=function(t,e){var n=r(t).format("YYYY-MM-DD"),o=r(e).format("YYYY-MM-DD");return n===o},b.isDay=function(t){return!(r(t)<r(b.calendarDate).add(10,"m"))},b.checkMax=function(t){angular.forEach(b.schedule,function(e,n){var o=r(t.date).format("YYYY-MM-DD");if(t.course.id==e.course.id&&r(o+"T"+t.course.course_start_time).toDate()==r(e.schedule_date+"T"+e.schedule_start_time).toDate())return parseInt(t.course.max_student)>parseInt(e.student.length)})},b.getTime=function(t){return r("1999-12-12T"+t).format("h:mm a")},b.eventClicked=function(t){if(t.course)var e=t.course,n="new",o="";else if(t.schedule)var e=t.schedule.course,n="sched",o=t.schedule;b.open({date:t.startsAt,courseStart:r(t.startsAt).format("h:mm a"),courseEnd:r(t.endsAt).format("h:mm a")},e,b.user,{courseType:n,scheduledCourse:o})},b.open=function(t,n,o,a){var s=c.open({animation:!0,templateUrl:e.trustAsResourceUrl(static_path("views/modals/add-course.modal.html")),controller:"AddCourseController",controllerAs:"vm",size:"lg",resolve:{date:t,course:n,user:o,schedType:a}});s.result.then(function(t){t.schedule?b.removeCourse(t):b.addCourse(t)})}}angular.module("schedule.controllers").controller("ScheduleController",t),t.$inject=["$scope","$sce","$state","Main","Users","Schedule","$uibModal","moment","calendarConfig"]}(),function(){"use strict";function t(t,e,n,o){function a(t){return t.data}function s(t){return e.reject("Error "+t.status)}function c(){return t.get("api/v1/courses/").then(a).catch(s)}function r(){return t.get("api/v1/course-schedule/").then(a).catch(s)}function i(e){return t.post("api/v1/course-schedule/",e).then(a).catch(s)}function u(e){return t.put("api/v1/course-schedule-remove/"+e.schedule+"/",e).then(a).catch(s)}var l=this;l.acct=o.getObject("authAcct");var d={getAllCourses:c,getSchedule:r,addCourse:i,removeCourse:u};return d}angular.module("schedule.services").factory("Schedule",t),t.$inject=["$http","$q","$state","$cookies"]}(),function(){"use strict";function t(t,e,n,o,a){function s(){o.isAuthAcct()?(u.authAcct=o.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.student-goal",{userId:u.dashId},{notify:!1})),c(u.dashId)):e.go("login")}function c(t){a.getUser(t).then(r).catch(i)}function r(t){u.user=t}function i(t){console.log(t),o.logout()}var u=this;s()}angular.module("main.controllers").controller("StudentGoalController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use strict";function t(t,e,n,o,a){function s(){o.isAuthAcct()?(u.authAcct=o.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.student-materials",{userId:u.dashId},{notify:!1})),c(u.dashId)):e.go("login")}function c(t){a.getUser(t).then(r).catch(i)}function r(t){u.user=t}function i(t){console.log(t),o.logout()}var u=this;s()}angular.module("main.controllers").controller("StudentMaterialsController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use strict";function t(t,e,n,o,a){function s(){o.isAuthAcct()?(u.authAcct=o.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.student-objective",{userId:u.dashId},{notify:!1})),c(u.dashId)):e.go("login")}function c(t){a.getUser(t).then(r).catch(i)}function r(t){u.user=t}function i(t){console.log(t),o.logout()}var u=this;s()}angular.module("main.controllers").controller("StudentObjectiveController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use strict";function t(t,e,n,o,a){function s(){o.isAuthAcct()?(u.authAcct=o.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.student-plan",{userId:u.dashId},{notify:!1})),c(u.dashId)):e.go("login")}function c(t){a.getUser(t).then(r).catch(i)}function r(t){u.user=t}function i(t){console.log(t),o.logout()}var u=this;s()}angular.module("main.controllers").controller("StudentPlanController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use strict";function t(t,e,n,o,a){function s(){o.isAuthAcct()?(u.authAcct=o.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.student-practice",{userId:u.dashId},{notify:!1})),c(u.dashId)):e.go("login")}function c(t){a.getUser(t).then(r).catch(i)}function r(t){u.user=t}function i(t){console.log(t),o.logout()}var u=this;s()}angular.module("main.controllers").controller("StudentPracticeController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use strict";function t(t,e,n,o,a){function s(){o.isAuthAcct()?(u.authAcct=o.getAuthAcct(),n.userId&&u.authAcct.is_staff?u.dashId=n.userId:(u.dashId=u.authAcct.id,e.transitionTo("app.student-wishlist",{userId:u.dashId},{notify:!1})),c(u.dashId)):e.go("login")}function c(t){a.getUser(t).then(r).catch(i)}function r(t){u.user=t}function i(t){console.log(t),o.logout()}var u=this;s()}angular.module("main.controllers").controller("StudentWishListController",t),t.$inject=["$scope","$state","$stateParams","Main","Users"]}(),function(){"use strict";function t(t,e,n,o,a,s){function c(){o.isAuthAcct()?(l.authAcct=o.getAuthAcct(),n.userId&&l.authAcct.is_staff?(l.profId=n.userId,a.getLocations().then(function(t){l.locations=t})):(l.profId=l.authAcct.id,e.transitionTo("app.profile",{userId:l.profId},{notify:!1})),r(l.profId)):e.go("app.dashboard")}function r(t){a.getUser(t).then(i).catch(u)}function i(t){l.respUser=t;var e=angular.copy(l.respUser);l.user=_.omit(e,"student_goal","student_log","student_material","student_wishlist","student_objective")}function u(t){console.log(t),o.logout()}var l=this;l.dateReg=/^(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,c(),l.updateProfile=function(e){s.upload({url:"api/v1/users/"+e.id+"/",data:e,method:"PUT",headers:{Authorization:"JWT "+l.authAcct.token}}).then(function(e){i(e.data),t.userProfileForm.$setPristine(),t.$emit("update_user_info",e.data)},function(t){console.log("Error status: "+t.status)},function(t){var e=parseInt(100*t.loaded/t.total);l.fileProgress=e})},l.clearChanges=function(){l.user={},l.user=angular.copy(l.respUser)},l.deleteNote=function(t){a.deleteStudentNote(t.id).then(function(e){var n=l.user.student_note.indexOf(t);l.user.student_note.splice(n,1)}).catch(function(t){console.log(t)})}}angular.module("main.controllers").controller("UserProfileController",t),t.$inject=["$scope","$state","$stateParams","Main","Users","Upload"]}(),function(){"use strict";function t(t,e,n,o){var a={restrict:"EA",scope:{user:"=",note:"="},link:function(n,a,s){function c(t){n.user.student_note.push(t)}function r(t){console.log(t)}a.on("click",function(){o.open({templateUrl:t.trustAsResourceUrl(static_path("views/modals/user-note.modal.html")),controller:["$scope","$uibModalInstance",function(t,e){var o=this;o.user=n.user,n.note&&(o.note=n.note),o.closeModal=function(){e.dismiss("cancel")},o.addNote=function(t){t.student=o.user.id,e.close(),n.postNote(t)},o.editNote=function(t){e.close(),n.updateNote(t)}}],controllerAs:"vm",size:"md"})}),n.postNote=function(t){e.createStudentNote(t).then(c).catch(r)},n.updateNote=function(t){var o={note:t.note};e.updateStudentNote(t.id,o).then(function(t){var e=n.user.student_note.indexOf(o);n.user.student_note[e]=t}).catch(r)}}};return a}angular.module("users.directives").directive("userNote",t),t.$inject=["$sce","Users","Main","$uibModal"]}(),function(){"use strict";function t(t,e,n,o){function a(t){return t.data}function s(t){return e.reject("Error "+t.status)}function c(){var e=o.getObject("authAcct");return t.get("api/v1/users/",{Authorization:"JWT "+e.token}).then(a).catch(s)}function r(e){var n=o.getObject("authAcct");return t.get("api/v1/users/"+e+"/",{Authorization:"JWT "+n.token}).then(a).catch(s)}function i(){var e=o.getObject("authAcct");return t.get("api/v1/locations/",{Authorization:"JWT "+e.token}).then(a).catch(s)}function u(e){var n=o.getObject("authAcct");return t.put("api/v1/users/"+e.id+"/",e,{Authorization:"JWT "+n.token}).then(a).catch(s)}function l(e){var n=o.getObject("authAcct");return t.post("api/v1/student-goals/",e,{Authorization:"JWT "+n.token}).then(a).catch(s)}function d(e,n){var c=o.getObject("authAcct");return t.put("api/v1/student-goals/"+e+"/",n,{Authorization:"JWT "+c.token}).then(a).catch(s)}function h(e){var n=o.getObject("authAcct");return t.delete("api/v1/student-goals/"+e+"/",{Authorization:"JWT "+n.token}).then(a).catch(s)}function f(e){var n=o.getObject("authAcct");return t.post("api/v1/student-objectives/",e,{Authorization:"JWT "+n.token}).then(a).catch(s)}function p(e,n){var c=o.getObject("authAcct");return t.put("api/v1/student-objectives/"+e+"/",n,{Authorization:"JWT "+c.token}).then(a).catch(s)}function m(e){var n=o.getObject("authAcct");return t.delete("api/v1/student-objectives/"+e+"/",{Authorization:"JWT "+n.token}).then(a).catch(s)}function g(e){var n=o.getObject("authAcct");return t.post("api/v1/student-practice-logs/",e,{Authorization:"JWT "+n.token}).then(a).catch(s)}function v(e){var n=o.getObject("authAcct");return t.put("api/v1/student-practice-logs/"+e.id+"/",e,{Authorization:"JWT "+n.token}).then(a).catch(s)}function _(e){var n=o.getObject("authAcct");return t.delete("api/v1/student-practice-logs/"+e+"/",{Authorization:"JWT "+n.token}).then(a).catch(s)}function A(e){var n=o.getObject("authAcct");return t.post("api/v1/student-wish-list/",e,{Authorization:"JWT "+n.token}).then(a).catch(s)}function b(e,n){var c=o.getObject("authAcct");return t.put("api/v1/student-wish-list/"+e+"/",n,{Authorization:"JWT "+c.token}).then(a).catch(s)}function $(e){var n=o.getObject("authAcct");return t.delete("api/v1/student-wish-list/"+e+"/",{Authorization:"JWT "+n.token}).then(a).catch(s)}function I(e){var n=o.getObject("authAcct");return t.post("api/v1/student-materials/",e,{Authorization:"JWT "+n.token}).then(a).catch(s)}function w(e,n){var c=o.getObject("authAcct");return t.put("api/v1/student-materials/"+e+"/",n,{Authorization:"JWT "+c.token}).then(a).catch(s)}function j(e){var n=o.getObject("authAcct");return t.delete("api/v1/student-materials/"+e+"/",{Authorization:"JWT "+n.token}).then(a).catch(s)}function y(e){var n=o.getObject("authAcct");return t.post("api/v1/student-notes/",e,{Authorization:"JWT "+n.token}).then(a).catch(s)}function T(e,n){var c=o.getObject("authAcct");return t.put("api/v1/student-notes/"+e+"/",n,{Authorization:"JWT "+c.token}).then(a).catch(s)}function U(e){var n=o.getObject("authAcct");return t.delete("api/v1/student-notes/"+e+"/",{Authorization:"JWT "+n.token}).then(a).catch(s)}function C(e){var n=o.getObject("authAcct");return t.delete("api/v1/student-plan/"+e.id+"/",{Authorization:"JWT "+n.token}).then(a).catch(s)}function M(e){var n=o.getObject("authAcct");return t.delete("api/v1/student-plan-file/"+e.id+"/",{Authorization:"JWT "+n.token}).then(a).catch(s)}var k={getAll:c,getUser:r,getLocations:i,updateUserProfile:u,createStudentGoal:l,updateStudentGoal:d,deleteStudentGoal:h,createStudentObjective:f,updateStudentObjective:p,deleteStudentObjective:m,createStudentPracticeLog:g,updateStudentPracticeLog:v,deleteStudentPracticeLog:_,createStudentWishList:A,updateStudentWishList:b,deleteStudentWishList:$,createStudentMaterial:I,updateStudentMaterial:w,deleteStudentMaterial:j,createStudentNote:y,updateStudentNote:T,deleteStudentNote:U,deleteStudentPlan:C,deleteStudentPlanFile:M};return k}angular.module("users.services").factory("Users",t),t.$inject=["$http","$q","$state","$cookies"]}(),function(){"use strict";function t(t,e,n,o){function a(t){return t.data}function s(t){return e.reject(t)}function c(e,n){return t.post("api/v1/auth/login/",{username:e,password:n}).then(function(t){return g.loginToken(t.data,n)}).catch(s)}function r(e,o){return t.post("api/v1/auth/token/",{username:e.username,password:o}).then(function(t){return g.setAuthAcct(e,t.data),g.refreshToken(e),e}).catch(function(t){console.log(t),n.go("login")})}function i(e){return t.post("/api/v1/users/",e).then(a).catch(s)}function u(e){var n=o.getObject("authAcct");return t.post("api/v1/auth/refresh/",{token:n.token}).then(function(t){return g.setAuthAcct(e,t.data),!0}).catch(function(t){return console.log(t),!1})}function l(t,e){return o.putObject("authAcct",{id:t.id,is_staff:t.is_admin,is_admin:t.is_admin,notification:"",token:e.token}),!0}function d(){return o.getObject("authAcct")}function h(){if(o.getObject("authAcct")){var e=o.getObject("authAcct");return t.post("api/v1/auth/verify/",{token:e.token}).then(function(t){return!0}).catch(function(t){return console.log(t),!1})}return!1}function f(){var t=o.getObject("authAcct");return t.is_staff}function p(){return o.remove("authAcct"),t.post("api/v1/auth/logout/").then(m).catch(s)}function m(t){o.remove("authAcct"),n.go("login")}var g={login:c,logout:p,register:i,loginToken:r,refreshToken:u,setAuthAcct:l,getAuthAcct:d,isAuthAcct:h,isStaffAcct:f};return g}angular.module("main.services").factory("Main",t),t.$inject=["$http","$q","$state","$cookies"]}(),function(){"use strict";function t(t,e){return{request:function(t){var n=t.url.slice(0,7),o="api/v1/"===n;if(o&&!!e.getObject("authAcct")){var a=e.getObject("authAcct");t.headers.Authorization="JWT "+a.token}return t}}}angular.module("main.services").factory("tokenInterceptor",t),t.$inject=["$q","$cookies"]}();